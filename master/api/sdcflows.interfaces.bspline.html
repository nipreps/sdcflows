<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="sdcflows.interfaces.epi module" href="sdcflows.interfaces.epi.html" /><link rel="prev" title="sdcflows.interfaces.brainmask module" href="sdcflows.interfaces.brainmask.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2021.10.09"/>
        <title>sdcflows.interfaces.bspline module - sdcflows 2.1.2.dev79+g48bb70c7 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    <link rel="stylesheet" type="text/css" href="../_static/css/version-switch.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">sdcflows 2.1.2.dev79+g48bb70c7 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
    <span class="sidebar-brand-text">sdcflows</span>
    <span id="version-slug" class="sidebar-brand-text">2.1.2.dev79 (dev)</span>
</a>

<!-- Versions dropdown -->
<div id="version-menu" class="version-tree">
  <ul>
  <li class="toctree-l1 has-children">
  <span class="sidebar-brand-text">2.1.2.dev79 (dev)</span>
  <input class="toctree-checkbox" id="toctree-checkbox-v" name="toctree-checkbox-v" role="switch" type="checkbox">
  <label for="toctree-checkbox-v"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label>
  <ul id="v-tags"></ul>
  </ul>
</div><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methods.html">Methods and implementation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../api.html">Library API (application program interface)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="sdcflows.cli.html">sdcflows.cli package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.cli.find_estimators.html">sdcflows.cli.find_estimators module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sdcflows.fieldmaps.html">sdcflows.fieldmaps module</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="sdcflows.interfaces.html">sdcflows.interfaces package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="sdcflows.interfaces.brainmask.html">sdcflows.interfaces.brainmask module</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">sdcflows.interfaces.bspline module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.interfaces.epi.html">sdcflows.interfaces.epi module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.interfaces.fmap.html">sdcflows.interfaces.fmap module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.interfaces.reportlets.html">sdcflows.interfaces.reportlets module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.interfaces.utils.html">sdcflows.interfaces.utils module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sdcflows.transform.html">sdcflows.transform module</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="sdcflows.utils.html">sdcflows.utils package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.bimap.html">sdcflows.utils.bimap module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.epimanip.html">sdcflows.utils.epimanip module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.misc.html">sdcflows.utils.misc module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.phasemanip.html">sdcflows.utils.phasemanip module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.tools.html">sdcflows.utils.tools module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.utils.wrangler.html">sdcflows.utils.wrangler module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="sdcflows.viz.html">sdcflows.viz package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.viz.utils.html">sdcflows.viz.utils module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="sdcflows.workflows.html">sdcflows.workflows package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="sdcflows.workflows.apply.html">sdcflows.workflows.apply package</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sdcflows.workflows.apply.correction.html">sdcflows.workflows.apply.correction module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sdcflows.workflows.apply.registration.html">sdcflows.workflows.apply.registration module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="sdcflows.workflows.fit.html">sdcflows.workflows.fit package</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sdcflows.workflows.fit.fieldmap.html">sdcflows.workflows.fit.fieldmap module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sdcflows.workflows.fit.pepolar.html">sdcflows.workflows.fit.pepolar module</a></li>
<li class="toctree-l4"><a class="reference internal" href="sdcflows.workflows.fit.syn.html">sdcflows.workflows.fit.syn module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.workflows.ancillary.html">sdcflows.workflows.ancillary module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.workflows.base.html">sdcflows.workflows.base module</a></li>
<li class="toctree-l3"><a class="reference internal" href="sdcflows.workflows.outputs.html">sdcflows.workflows.outputs module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">What’s new?</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="module-sdcflows.interfaces.bspline">
<span id="sdcflows-interfaces-bspline-module"></span><h1>sdcflows.interfaces.bspline module<a class="headerlink" href="#module-sdcflows.interfaces.bspline" title="Permalink to this headline">¶</a></h1>
<p>Filtering of <span class="math notranslate nohighlight">\(B_0\)</span> field mappings with B-Splines.</p>
<dl class="py class">
<dt class="sig sig-object py" id="sdcflows.interfaces.bspline.ApplyCoeffsField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sdcflows.interfaces.bspline.</span></span><span class="sig-name descname"><span class="pre">ApplyCoeffsField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_monitor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sdcflows/interfaces/bspline.html#ApplyCoeffsField"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sdcflows.interfaces.bspline.ApplyCoeffsField" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nipype.interfaces.base.core.SimpleInterface</span></code></p>
<p>Convert a set of B-Spline coefficients to a full displacements map.</p>
<dl class="field-list simple">
<dt class="field-odd">Mandatory Inputs</dt>
<dd class="field-odd"><p><strong>in_coeff</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>) – Input coefficients, after alignment to the EPI data.</p>
</dd>
<dt class="field-even">Optional Inputs</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>in_data</strong> (<em>a list of items which are a pathlike object or string representing a file</em>)</p></li>
<li><p><strong>in_xfms</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>) – List of head-motion correction matrices.</p></li>
<li><p><strong>num_threads</strong> (<em>an integer</em>) – Number of threads.</p></li>
<li><p><strong>pe_dir</strong> (<em>a list of items which are ‘i’ or ‘i-’ or ‘j’ or ‘j-’ or ‘k’ or ‘k-’</em>)</p></li>
<li><p><strong>ro_time</strong> (<em>a list of items which are a float</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Outputs</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out_corrected</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>)</p></li>
<li><p><strong>out_field</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>)</p></li>
<li><p><strong>out_warp</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sdcflows.interfaces.bspline.BSplineApprox">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sdcflows.interfaces.bspline.</span></span><span class="sig-name descname"><span class="pre">BSplineApprox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_monitor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sdcflows/interfaces/bspline.html#BSplineApprox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sdcflows.interfaces.bspline.BSplineApprox" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nipype.interfaces.base.core.SimpleInterface</span></code></p>
<p>Approximate the <span class="math notranslate nohighlight">\(B_0\)</span> field using tensor-product B-Splines.</p>
<p>The approximation effectively smooths the data, removing spikes and other
sources of noise, as well as enables the extrapolation of the <span class="math notranslate nohighlight">\(B_0\)</span> field
beyond the brain mask, which alleviates boundary effects in correction.</p>
<p>This interface resolves the optimization problem of obtaining the B-Spline coefficients
<span class="math notranslate nohighlight">\(c(\mathbf{k})\)</span> that best approximate the data samples within the
brain mask <span class="math notranslate nohighlight">\(f(\mathbf{s})\)</span>, following Eq. (17) – in that case for 2D –
of <a class="reference internal" href="#unser1999" id="id1"><span>[Unser1999]</span></a>.
Here, and adapted to 3D:</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\[f(\mathbf{s}) =
\sum_{k_1} \sum_{k_2} \sum_{k_3} c(\mathbf{k}) \Psi^3(\mathbf{k}, \mathbf{s}).
\label{eq:1}\tag{1}\]</div></div>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="unser1999"><span class="brackets"><a class="fn-backref" href="#id1">Unser1999</a></span></dt>
<dd><p>M. Unser, “<a class="reference external" href="http://bigwww.epfl.ch/publications/unser9902.pdf">Splines: A Perfect Fit for Signal and Image Processing</a>,” IEEE Signal Processing
Magazine 16(6):22-38, 1999.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">bspline_weights()</span></code> - for Eq. <span class="math notranslate nohighlight">\(\eqref{eq:2}\)</span> and the evaluation of
the tri-cubic B-Splines <span class="math notranslate nohighlight">\(\Psi^3(\mathbf{k}, \mathbf{s})\)</span>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Mandatory Inputs</dt>
<dd class="field-odd"><p><strong>in_data</strong> (<em>a pathlike object or string representing an existing file</em>) – Path to a fieldmap.</p>
</dd>
<dt class="field-even">Optional Inputs</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>bs_spacing</strong> (<em>a list of items which are a tuple of the form: (a float, a float, a float)</em>) – Spacing between B-Spline control points.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">[(40.0,</span> <span class="pre">40.0,</span> <span class="pre">20.0)]</span></code>)</p></li>
<li><p><strong>debug</strong> (<em>a boolean</em>) – Generate extra assets for debugging.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><strong>extrapolate</strong> (<em>a boolean</em>) – Generate a field, extrapolated outside the brain mask.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></li>
<li><p><strong>in_mask</strong> (<em>a pathlike object or string representing an existing file</em>) – Path to a brain mask.</p></li>
<li><p><strong>recenter</strong> (<em>‘mode’ or ‘median’ or ‘mean’ or False</em>) – Strategy to recenter the distribution of the input fieldmap.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">mode</span></code>)</p></li>
<li><p><strong>ridge_alpha</strong> (<em>a float</em>) – Controls the regularization.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">0.01</span></code>)</p></li>
<li><p><strong>zooms_min</strong> (<em>a float or a legal value</em>) – Limit minimum image zooms, set 0.0 to use the original image.
(Nipype <strong>default</strong> value: <code class="docutils literal notranslate"><span class="pre">1.95</span></code>)</p></li>
</ul>
</dd>
<dt class="field-odd">Outputs</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out_coeff</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>)</p></li>
<li><p><strong>out_error</strong> (<em>a pathlike object or string representing an existing file</em>)</p></li>
<li><p><strong>out_extrapolated</strong> (<em>a pathlike object or string representing a file</em>)</p></li>
<li><p><strong>out_field</strong> (<em>a pathlike object or string representing an existing file</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sdcflows.interfaces.bspline.TOPUPCoeffReorient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sdcflows.interfaces.bspline.</span></span><span class="sig-name descname"><span class="pre">TOPUPCoeffReorient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_monitor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sdcflows/interfaces/bspline.html#TOPUPCoeffReorient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sdcflows.interfaces.bspline.TOPUPCoeffReorient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nipype.interfaces.base.core.SimpleInterface</span></code></p>
<p>Revise the orientation of TOPUP-generated B-Spline coefficients.</p>
<p>TOPUP-generated “fieldcoeff” files are just B-Spline fields, where the shape
of the field is fixated to be a decimated grid of the original image by an
integer factor and added 3 pixels on each dimension.
This is one root reason why TOPUP errors (FSL 6) or segfaults (FSL 5), when the
input image has odd number of voxels along one or more directions.</p>
<p>These “fieldcoeff” are fixated to be zero-centered, and have “plumb” orientation
(as in, aligned with cardinal/imaging axes).
The q-form of these NIfTI files is always diagonal, with the decimation factors
set on the diagonal (and hence, the voxel zooms).
The origin of the q-form is set to the reference image’s shape.
All the director cosines of the output coefficients will be positive.
In other words, the output orientation is either RAS, ARS, ASR, SAR, or SRA.</p>
<p>This interface modifies these coefficient files to be fully-fledged NIfTI images
aligned with the reference image.
Therefore, the s-form header of the coefficients file is updated to match that
of the reference file.
The s-form header is used because the imaging axes may be oblique.</p>
<p>The q-form retains the original header and is marked with code 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Mandatory Inputs</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fmap_ref</strong> (<em>a pathlike object or string representing an existing file</em>) – The fieldmap reference.</p></li>
<li><p><strong>in_coeff</strong> (<em>a list of items which are a pathlike object or string representing a file</em>) – Input coefficients file(s) from TOPUP.</p></li>
<li><p><strong>pe_dir</strong> (<em>‘i’ or ‘i-’ or ‘j’ or ‘j-’ or ‘k’ or ‘k-’ or ‘x’ or ‘x-’ or ‘y’ or ‘y-’ or ‘z’ or ‘z-’</em>) – Phase encoding direction.</p></li>
</ul>
</dd>
<dt class="field-even">Outputs</dt>
<dd class="field-even"><p><strong>out_coeff</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>) – Patched coefficients.</p>
</dd>
</dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="sdcflows.interfaces.bspline.TransformCoefficients">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sdcflows.interfaces.bspline.</span></span><span class="sig-name descname"><span class="pre">TransformCoefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_monitor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sdcflows/interfaces/bspline.html#TransformCoefficients"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sdcflows.interfaces.bspline.TransformCoefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nipype.interfaces.base.core.SimpleInterface</span></code></p>
<p>Project coefficients files to another space through a rigid-body transform.</p>
<dl class="field-list simple">
<dt class="field-odd">Mandatory Inputs</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fmap_ref</strong> (<em>a pathlike object or string representing an existing file</em>) – The fieldmap reference.</p></li>
<li><p><strong>in_coeff</strong> (<em>a list of items which are a pathlike object or string representing a file</em>) – Input coefficients file(s).</p></li>
<li><p><strong>transform</strong> (<em>a pathlike object or string representing an existing file</em>) – Rigid-body transform file.</p></li>
</ul>
</dd>
<dt class="field-even">Optional Inputs</dt>
<dd class="field-even"><p><strong>fmap_target</strong> (<em>a pathlike object or string representing an existing file</em>) – The distorted EPI target (feed to set debug mode on).</p>
</dd>
<dt class="field-odd">Outputs</dt>
<dd class="field-odd"><p><strong>out_coeff</strong> (<em>a list of items which are a pathlike object or string representing an existing file</em>) – Moved coefficients.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="sdcflows.interfaces.bspline.bspline_grid">
<span class="sig-prename descclassname"><span class="pre">sdcflows.interfaces.bspline.</span></span><span class="sig-name descname"><span class="pre">bspline_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">control_zooms_mm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(40.0,</span> <span class="pre">40.0,</span> <span class="pre">20.0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sdcflows/interfaces/bspline.html#bspline_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#sdcflows.interfaces.bspline.bspline_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference external" href="https://nipy.org/nibabel/reference/nibabel.nifti1.html#nibabel.nifti1.Nifti1Image" title="(in NiBabel v4.0.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Nifti1Image</span></code></a> embedding the location of control points.</p>
</dd></dl>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sdcflows.interfaces.epi.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">sdcflows.interfaces.epi module</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="sdcflows.interfaces.brainmask.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">sdcflows.interfaces.brainmask module</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2022, The NiPreps developers |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="../_sources/api/sdcflows.interfaces.bspline.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/version-switch.js"></script>
    </body>
</html>